{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\DELL\\\\development_loc\\\\itsm_frontend\\\\src\\\\Components\\\\Request Management\\\\MyRequestList.js\",\n  _s = $RefreshSig$();\nimport { DataGrid } from \"@mui/x-data-grid\";\nimport React, { useEffect, useMemo, useState } from \"react\";\nimport GlobalService from \"../../services/GlobalService\";\nimport { resturls } from \"../../global/utils/apiurls\";\nimport { useTheme } from \"../../global/commonComponents/ThemeContext\";\nimport { useHistory } from \"react-router-dom/cjs/react-router-dom.min\";\nimport { Skeleton } from \"@mui/material\";\nimport { useAuth } from \"../../application/modules/auth/hooks/useAuth\";\nimport { useRearrange } from \"../../presentation/hooks/rearrange-header\";\n// import { useRearrange } from \"../../presentation/shared/rearrange-header\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function MyRequestList({\n  fromUser = \"superadmin\"\n}) {\n  _s();\n  const [loading, setLoading] = useState(true);\n  const [requestData, setRequestData] = useState([]);\n  // const [headers, setHeaders] = useState([]);\n  const {\n    theme\n  } = useTheme();\n  const {\n    user_auth\n  } = useAuth();\n  const navigate = useHistory();\n  const getRequestOpenedBy = () => {\n    GlobalService.generalSelect(response => {\n      const {\n        estatus,\n        data\n      } = response;\n      setRequestData(data);\n      setLoading(false);\n    }, `${resturls.getRequestOpenedBy}/${user_auth.userId}`, {}, \"GET\");\n  };\n  const headers = useMemo(() => {\n    if (!(requestData !== null && requestData !== void 0 && requestData.length)) return [];\n    const excludeFields = [\"id\", \"notes\", \"catalogueDetails\", \"categoryDetails\", \"subCategoryDetails\", \"subCategory\", \"priority\", \"serviceCategory\", \"configurationItem\", \"impactReason\", \"urgencyReason\", \"createdBy\", \"requestedFor\", \"updatedBy\", \"requestType\", \"generateFormId\", \"values\", \"dueDate\"];\n    const headerMappings = {\n      catalogueDetails: \"Status\",\n      approvalStatus: \"Status\",\n      openedBy: \"Opened By\",\n      assignedTo: \"Assigned To\"\n    };\n    return Object.keys(requestData[0]).filter(key => !excludeFields.includes(key)).map((key, index) => {\n      const headerName = headerMappings[key] || key.replace(/([a-z])([A-Z])/g, \"$1 $2\") // Add space between camel case\n      .replace(/_/g, \" \") // Replace underscores with spaces\n      .toLowerCase().replace(/\\b\\w/g, char => char.toUpperCase()); // Capitalize each word\n\n      if (index === 0) {\n        return {\n          field: key,\n          headerName,\n          width: 200,\n          renderCell: params => /*#__PURE__*/_jsxDEV(\"span\", {\n            onClick: () => navigate.push(`/${fromUser}/server-request/update-request/${params.row.requestNumber}?noBanner=true`),\n            className: \"underline text-blue-600 cursor-pointer\",\n            children: params.value || \"N/A\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 84,\n            columnNumber: 15\n          }, this)\n        };\n      }\n      if (key === \"openedBy\" || key === \"assignedTo\") {\n        return {\n          field: key,\n          headerName,\n          width: 200,\n          renderCell: params => {\n            var _params$value;\n            return ((_params$value = params.value) === null || _params$value === void 0 ? void 0 : _params$value.name) || \"N/A\";\n          }\n        };\n      }\n      return {\n        field: key,\n        headerName,\n        width: 150\n      };\n    });\n  }, [requestData, navigate]);\n  const {\n    resultHeaders,\n    ReArrangeController\n  } = useRearrange({\n    resultHeaders: headers\n  });\n  useEffect(() => {\n    getRequestOpenedBy();\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"p-4\",\n    children: [ReArrangeController, loading ? /*#__PURE__*/_jsxDEV(Skeleton, {\n      variant: \"rectangular\",\n      height: 600\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: /*#__PURE__*/_jsxDEV(DataGrid, {\n        rows: requestData,\n        columns: resultHeaders,\n        getRowId: row => row.incidentId || row.id,\n        pageSizeOptions: [10],\n        disableRowSelectionOnClick: true,\n        initialState: {\n          pagination: {\n            paginationModel: {\n              page: 0,\n              pageSize: 10\n            }\n          }\n        },\n        sx: {\n          borderRadius: 1,\n          \"& .MuiDataGrid-columnHeaders\": {\n            \"& .MuiDataGrid-row--borderBottom\": {\n              background: `${theme.outerBodyColor}`,\n              color: `${theme.tableFontColor}`\n            }\n          },\n          \"& .MuiDataGrid-rowHeader\": {\n            background: `${theme.outerBodyColor}`,\n            color: `${theme.fontColor}`\n          },\n          \"& .MuiDataGrid-row--borderBottom\": {\n            borderBottom: \"2px solid #cccccc\"\n          }\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 9\n      }, this)\n    }, void 0, false)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 122,\n    columnNumber: 5\n  }, this);\n}\n_s(MyRequestList, \"2ynHVqMfe3rroy613HQ+pEodVVc=\", false, function () {\n  return [useTheme, useAuth, useHistory, useRearrange];\n});\n_c = MyRequestList;\nvar _c;\n$RefreshReg$(_c, \"MyRequestList\");","map":{"version":3,"names":["DataGrid","React","useEffect","useMemo","useState","GlobalService","resturls","useTheme","useHistory","Skeleton","useAuth","useRearrange","jsxDEV","_jsxDEV","Fragment","_Fragment","MyRequestList","fromUser","_s","loading","setLoading","requestData","setRequestData","theme","user_auth","navigate","getRequestOpenedBy","generalSelect","response","estatus","data","userId","headers","length","excludeFields","headerMappings","catalogueDetails","approvalStatus","openedBy","assignedTo","Object","keys","filter","key","includes","map","index","headerName","replace","toLowerCase","char","toUpperCase","field","width","renderCell","params","onClick","push","row","requestNumber","className","children","value","fileName","_jsxFileName","lineNumber","columnNumber","_params$value","name","resultHeaders","ReArrangeController","variant","height","rows","columns","getRowId","incidentId","id","pageSizeOptions","disableRowSelectionOnClick","initialState","pagination","paginationModel","page","pageSize","sx","borderRadius","background","outerBodyColor","color","tableFontColor","fontColor","borderBottom","_c","$RefreshReg$"],"sources":["C:/Users/DELL/development_loc/itsm_frontend/src/Components/Request Management/MyRequestList.js"],"sourcesContent":["import { DataGrid } from \"@mui/x-data-grid\";\r\nimport React, { useEffect, useMemo, useState } from \"react\";\r\nimport GlobalService from \"../../services/GlobalService\";\r\nimport { resturls } from \"../../global/utils/apiurls\";\r\nimport { useTheme } from \"../../global/commonComponents/ThemeContext\";\r\nimport {\r\n  useHistory,\r\n} from \"react-router-dom/cjs/react-router-dom.min\";\r\nimport { Skeleton } from \"@mui/material\";\r\nimport { useAuth } from \"../../application/modules/auth/hooks/useAuth\";\r\nimport { useRearrange } from \"../../presentation/hooks/rearrange-header\";\r\n// import { useRearrange } from \"../../presentation/shared/rearrange-header\";\r\n\r\nexport default function MyRequestList({ fromUser = \"superadmin\" }) {\r\n  const [loading, setLoading] = useState(true);\r\n  const [requestData, setRequestData] = useState([]);\r\n  // const [headers, setHeaders] = useState([]);\r\n  const { theme } = useTheme();\r\n  const { user_auth } = useAuth();\r\n\r\n  const navigate = useHistory();\r\n\r\n  const getRequestOpenedBy = () => {\r\n    GlobalService.generalSelect(\r\n      (response) => {\r\n        const { estatus, data } = response;\r\n          setRequestData(data);\r\n          setLoading(false);\r\n      },\r\n      `${resturls.getRequestOpenedBy}/${user_auth.userId}`,\r\n      {},\r\n      \"GET\"\r\n    );\r\n  };\r\n\r\n  const headers = useMemo(() => {\r\n    if (!requestData?.length) return [];\r\n  \r\n    const excludeFields = [\r\n      \"id\",\r\n      \"notes\",\r\n      \"catalogueDetails\",\r\n      \"categoryDetails\",\r\n      \"subCategoryDetails\",\r\n      \"subCategory\",\r\n      \"priority\",\r\n      \"serviceCategory\",\r\n      \"configurationItem\",\r\n      \"impactReason\",\r\n      \"urgencyReason\",\r\n      \"createdBy\",\r\n      \"requestedFor\",\r\n      \"updatedBy\",\r\n      \"requestType\",\r\n      \"generateFormId\",\r\n      \"values\",\r\n      \"dueDate\",\r\n    ];\r\n  \r\n    const headerMappings = {\r\n      catalogueDetails: \"Status\",\r\n      approvalStatus: \"Status\",\r\n      openedBy: \"Opened By\",\r\n      assignedTo: \"Assigned To\",\r\n    };\r\n  \r\n    return Object.keys(requestData[0])\r\n      .filter((key) => !excludeFields.includes(key))\r\n      .map((key, index) => {\r\n        const headerName =\r\n          headerMappings[key] ||\r\n          key\r\n            .replace(/([a-z])([A-Z])/g, \"$1 $2\") // Add space between camel case\r\n            .replace(/_/g, \" \") // Replace underscores with spaces\r\n            .toLowerCase()\r\n            .replace(/\\b\\w/g, (char) => char.toUpperCase()); // Capitalize each word\r\n  \r\n        if (index === 0) {\r\n          return {\r\n            field: key,\r\n            headerName,\r\n            width: 200,\r\n            renderCell: (params) => (\r\n              <span\r\n                onClick={() =>\r\n                  navigate.push(\r\n                    `/${fromUser}/server-request/update-request/${params.row.requestNumber}?noBanner=true`\r\n                  )\r\n                }\r\n                className=\"underline text-blue-600 cursor-pointer\"\r\n              >\r\n                {params.value || \"N/A\"}\r\n              </span>\r\n            ),\r\n          };\r\n        }\r\n  \r\n        if (key === \"openedBy\" || key === \"assignedTo\") {\r\n          return {\r\n            field: key,\r\n            headerName,\r\n            width: 200,\r\n            renderCell: (params) => params.value?.name || \"N/A\",\r\n          };\r\n        }\r\n  \r\n        return {\r\n          field: key,\r\n          headerName,\r\n          width: 150,\r\n        };\r\n      });\r\n  }, [requestData, navigate]);\r\n  \r\n  const {resultHeaders, ReArrangeController} = useRearrange({resultHeaders: headers});\r\n\r\n  useEffect(() => {\r\n    getRequestOpenedBy();\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"p-4\">\r\n      {ReArrangeController}\r\n      {loading ? (\r\n        <Skeleton variant=\"rectangular\" height={600} />\r\n      ) : (\r\n        <>\r\n        \r\n        <DataGrid\r\n          rows={requestData}\r\n          columns={resultHeaders}\r\n          getRowId={(row) => row.incidentId || row.id}\r\n          pageSizeOptions={[10]}\r\n          disableRowSelectionOnClick\r\n          initialState={{\r\n            pagination: { paginationModel: { page: 0, pageSize: 10 } },\r\n          }}\r\n          sx={{\r\n            borderRadius: 1,\r\n            \"& .MuiDataGrid-columnHeaders\": {\r\n              \"& .MuiDataGrid-row--borderBottom\": {\r\n                background: `${theme.outerBodyColor}`,\r\n                color: `${theme.tableFontColor}`,\r\n              },\r\n            },\r\n            \"& .MuiDataGrid-rowHeader\": {\r\n              background: `${theme.outerBodyColor}`,\r\n              color: `${theme.fontColor}`,\r\n            },\r\n            \"& .MuiDataGrid-row--borderBottom\": {\r\n              borderBottom: \"2px solid #cccccc\",\r\n            },\r\n          }}\r\n        />\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}