{"ast":null,"code":"// import Cookies from 'js-cookie';\n// import GlobalService from '../../services/GlobalService';\n// import { resturls } from './apiurls';\n// import { cookiedomain } from './constants';\n// import React from 'react';\n// import { Redirect, Route } from 'react-router-dom/cjs/react-router-dom.min';\n\nfunction parseJwt(token) {\n  console.log('token', token);\n  const base64Url = token.split('.')[1];\n  const base64 = base64Url.replace(/-/g, '+').replace(/_/g, '/');\n  const jsonPayload = decodeURIComponent(atob(base64).split('').map(c => `%${`00${c.charCodeAt(0).toString(16)}`.slice(-2)}`).join(''));\n  console.log('Payload', jsonPayload);\n  return JSON.parse(jsonPayload);\n}\n\n// function updateC1() {\n// const expmin = new Date(new Date().getTime() + 20 * 60 * 1000);\n// const val1 = Cookies.get('_c1', { domain: cookiedomain });\n// if (val1 !== undefined && val1 !== null) {\n// Cookies.remove('_c1', { domain: cookiedomain });\n// Cookies.set('_c1', val1, { path: '/', expires: expmin, domain: cookiedomain });\n// }\n// }\n\n// function updateUserInfo(c1 = null) {\n// let val1 = c1;\n// console.log(cookiedomain);\n// const ck = Cookies.get('_c1', { domain: cookiedomain });\n\n// if (ck != null) {\n// val1 = ck;\n// console.log('Thru cookie');\n// } else if (c1 !== undefined && c1 !== null) {\n// const cookie = parseJwt(c1);\n// const now = new Date();\n// const cookieObj = {\n// data: (c1),\n// expiry: now.getTime() + cookie.max_age,\n// };\n// localStorage.setItem('_c1', cookieObj);\n// console.log('Thru Params - post login');\n// }\n// if (val1 === undefined || val1 === null) {\n// const cookieObj = localStorage.getItem('_c1');\n// if (cookieObj !== undefined && cookieObj !== null) {\n// const cookie = parseJwt(cookieObj.data);\n// const now = new Date();\n\n// if (Math.floor(now.getTime() / 1000) <= cookieObj.expiry) {\n// val1 = cookieObj.data;\n// cookieObj.expiry = Math.floor(now.getTime() / 1000) + cookie.max_age;\n// localStorage.setItem('_c1', cookieObj);\n// } else {\n// localStorage.removeItem('_c1');\n// window.localStorage.setItem('isEventClosed', '');\n// }\n// }\n// console.log('Thru Local Store');\n// }\n\n// if (val1 !== undefined && val1 !== null && val1) {\n// const data = parseJwt(val1);\n// console.log(data, 'parseValue');\n// localStorage.setItem('userName', data.sub);\n// localStorage.setItem('role', data.userRole);\n// localStorage.setItem('userId', data.userId);\n// console.log('data\\n\\n');\n// console.log(data, 'data\\n\\n');\n// } else {\n// console.log('updateUserInfo - Cookie / localStorage / Params not found');\n// }\n// }\n\n// function clearCookies() {\n// let ck = Cookies.get('_c1', { domain: cookiedomain });\n// console.log('before logout ck', ck, cookiedomain);\n// Cookies.remove('_c1', { domain: cookiedomain });\n// ck = Cookies.get('_c1', { domain: cookiedomain });\n// console.log('after logout ck', ck, cookiedomain);\n// localStorage.removeItem('_c1');\n// document.cookie = '_c1=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;';\n// document.location.href = '/login';\n// window.localStorage.setItem('isEventClosed', '');\n// window.localStorage.setItem('authAmphiSessionId', undefined);\n// }\n\n// function processLogout(redirectToLogin = true) {\n// console.log('Logout process');\n// const obj = {};\n// GlobalService.generalSelect(\n// (respdata) => {\n// const { estatus, emessage, data } = respdata;\n// console.log(estatus, emessage, data);\n// if (estatus && emessage) {\n// if (data.status === 'logged out') {\n// let ck = Cookies.get('_c1', { domain: cookiedomain });\n// console.log('before logout ck', ck, cookiedomain);\n// Cookies.remove('_c1', { domain: cookiedomain });\n// localStorage.removeItem('schoolId');\n// localStorage.removeItem('schoolName');\n// ck = Cookies.get('_c1', { domain: cookiedomain });\n// console.log('after logout ck', ck, cookiedomain);\n// localStorage.removeItem('_c1');\n// localStorage.removeItem('institutionId');\n// localStorage.removeItem('domain');\n// localStorage.removeItem('activePrgmScreen');\n// localStorage.removeItem('roleDetailsMap');\n// localStorage.removeItem('defaultRedirection');\n// document.cookie = '_c1=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;';\n// if (redirectToLogin) {\n// document.location.href = '/login';\n// }\n// window.localStorage.setItem('isEventClosed', '');\n// if (window.ReactNativeWebView) {\n// window.ReactNativeWebView.postMessage('loggedOut');\n// window.ReactNativeWebView.postMessage('loggedOut');\n// }\n// }\n// }\n// }, resturls.logout, obj, 'POST',\n// );\n// }\n\n// function PrivateRoute({ component: Component, cprops, ...rest }) {\n// const role = ''\n// let valid;\n// console.log(role, 'roleee');\n// if (role === 'superadmin') {\n// valid = true;\n// } else if (role === 'enduser') {\n// valid = true;\n// } else if (role === 'admin') {\n// valid = true;\n// } else {\n// valid = false;\n// }\n// \n// return (\n// <Route\n// {...rest}\n// render={(props) => ((valid === true)\n// ? <Component {...cprops} {...props} />\n// : (\n// <Redirect\n// to={{\n// pathname: '/login',\n// state: { from: props.location },\n// }}\n// />\n// ))}\n// />\n// );\n// }\n\n// function updateFavIcon() {\n// const favicon = document.getElementById('favicon');\n// const bodyTagEle = document.getElementsByTagName('body')[0];\n// GlobalService.generalSelect(\n// (respdata) => {\n// const {\n// estatus,\n// emessage,\n// data: {\n// faviconLink, titleContent, roleDetailsMap, defaultRedirection,\n// domainTheme, isTrank,\n// },\n// } = respdata;\n// favicon.href = `${favicon.href}/favicon.png`;\n// document.title = 'E-Box App | We Revolutionize Technology and Engineering Learning';\n// if (estatus === true && emessage === 'success') {\n// if (faviconLink !== '') {\n// favicon.href = faviconLink;\n// document.title = titleContent;\n// }\n// localStorage.set('roleDetailsMap', roleDetailsMap);\n// localStorage.set('defaultRedirection', defaultRedirection);\n// localStorage.set('isTrank', isTrank);\n// if (domainTheme !== null && domainTheme !== undefined && domainTheme.length > 0) {\n// bodyTagEle.classList.add(domainTheme);\n// }\n// }\n// }, resturls.obtainFavIconAndTitle,\n// );\n// }\n\nexport { parseJwt\n//  updateC1, updateUserInfo, PrivateRoute, processLogout, clearCookies, updateFavIcon,\n};","map":{"version":3,"names":["parseJwt","token","console","log","base64Url","split","base64","replace","jsonPayload","decodeURIComponent","atob","map","c","charCodeAt","toString","slice","join","JSON","parse"],"sources":["C:/Users/DELL/development_loc/itsm_frontend/src/global/utils/index.js"],"sourcesContent":["// import Cookies from 'js-cookie';\r\n// import GlobalService from '../../services/GlobalService';\r\n// import { resturls } from './apiurls';\r\n// import { cookiedomain } from './constants';\r\n// import React from 'react';\r\n// import { Redirect, Route } from 'react-router-dom/cjs/react-router-dom.min';\r\n\r\nfunction parseJwt(token) {\r\n  console.log('token', token);\r\n  const base64Url = token.split('.')[1];\r\n  const base64 = base64Url.replace(/-/g, '+').replace(/_/g, '/');\r\n  const jsonPayload = decodeURIComponent(atob(base64).split('').map((c) => `%${(`00${c.charCodeAt(0).toString(16)}`).slice(-2)}`).join(''));\r\n  console.log('Payload', jsonPayload);\r\n  return JSON.parse(jsonPayload);\r\n}\r\n\r\n// function updateC1() {\r\n// const expmin = new Date(new Date().getTime() + 20 * 60 * 1000);\r\n// const val1 = Cookies.get('_c1', { domain: cookiedomain });\r\n// if (val1 !== undefined && val1 !== null) {\r\n// Cookies.remove('_c1', { domain: cookiedomain });\r\n// Cookies.set('_c1', val1, { path: '/', expires: expmin, domain: cookiedomain });\r\n// }\r\n// }\r\n\r\n// function updateUserInfo(c1 = null) {\r\n// let val1 = c1;\r\n// console.log(cookiedomain);\r\n// const ck = Cookies.get('_c1', { domain: cookiedomain });\r\n\r\n// if (ck != null) {\r\n// val1 = ck;\r\n// console.log('Thru cookie');\r\n// } else if (c1 !== undefined && c1 !== null) {\r\n// const cookie = parseJwt(c1);\r\n// const now = new Date();\r\n// const cookieObj = {\r\n// data: (c1),\r\n// expiry: now.getTime() + cookie.max_age,\r\n// };\r\n// localStorage.setItem('_c1', cookieObj);\r\n// console.log('Thru Params - post login');\r\n// }\r\n// if (val1 === undefined || val1 === null) {\r\n// const cookieObj = localStorage.getItem('_c1');\r\n// if (cookieObj !== undefined && cookieObj !== null) {\r\n// const cookie = parseJwt(cookieObj.data);\r\n// const now = new Date();\r\n\r\n// if (Math.floor(now.getTime() / 1000) <= cookieObj.expiry) {\r\n// val1 = cookieObj.data;\r\n// cookieObj.expiry = Math.floor(now.getTime() / 1000) + cookie.max_age;\r\n// localStorage.setItem('_c1', cookieObj);\r\n// } else {\r\n// localStorage.removeItem('_c1');\r\n// window.localStorage.setItem('isEventClosed', '');\r\n// }\r\n// }\r\n// console.log('Thru Local Store');\r\n// }\r\n\r\n// if (val1 !== undefined && val1 !== null && val1) {\r\n// const data = parseJwt(val1);\r\n// console.log(data, 'parseValue');\r\n// localStorage.setItem('userName', data.sub);\r\n// localStorage.setItem('role', data.userRole);\r\n// localStorage.setItem('userId', data.userId);\r\n// console.log('data\\n\\n');\r\n// console.log(data, 'data\\n\\n');\r\n// } else {\r\n// console.log('updateUserInfo - Cookie / localStorage / Params not found');\r\n// }\r\n// }\r\n\r\n// function clearCookies() {\r\n// let ck = Cookies.get('_c1', { domain: cookiedomain });\r\n// console.log('before logout ck', ck, cookiedomain);\r\n// Cookies.remove('_c1', { domain: cookiedomain });\r\n// ck = Cookies.get('_c1', { domain: cookiedomain });\r\n// console.log('after logout ck', ck, cookiedomain);\r\n// localStorage.removeItem('_c1');\r\n// document.cookie = '_c1=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;';\r\n// document.location.href = '/login';\r\n// window.localStorage.setItem('isEventClosed', '');\r\n// window.localStorage.setItem('authAmphiSessionId', undefined);\r\n// }\r\n\r\n// function processLogout(redirectToLogin = true) {\r\n// console.log('Logout process');\r\n// const obj = {};\r\n// GlobalService.generalSelect(\r\n// (respdata) => {\r\n// const { estatus, emessage, data } = respdata;\r\n// console.log(estatus, emessage, data);\r\n// if (estatus && emessage) {\r\n// if (data.status === 'logged out') {\r\n// let ck = Cookies.get('_c1', { domain: cookiedomain });\r\n// console.log('before logout ck', ck, cookiedomain);\r\n// Cookies.remove('_c1', { domain: cookiedomain });\r\n// localStorage.removeItem('schoolId');\r\n// localStorage.removeItem('schoolName');\r\n// ck = Cookies.get('_c1', { domain: cookiedomain });\r\n// console.log('after logout ck', ck, cookiedomain);\r\n// localStorage.removeItem('_c1');\r\n// localStorage.removeItem('institutionId');\r\n// localStorage.removeItem('domain');\r\n// localStorage.removeItem('activePrgmScreen');\r\n// localStorage.removeItem('roleDetailsMap');\r\n// localStorage.removeItem('defaultRedirection');\r\n// document.cookie = '_c1=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;';\r\n// if (redirectToLogin) {\r\n// document.location.href = '/login';\r\n// }\r\n// window.localStorage.setItem('isEventClosed', '');\r\n// if (window.ReactNativeWebView) {\r\n// window.ReactNativeWebView.postMessage('loggedOut');\r\n// window.ReactNativeWebView.postMessage('loggedOut');\r\n// }\r\n// }\r\n// }\r\n// }, resturls.logout, obj, 'POST',\r\n// );\r\n// }\r\n\r\n// function PrivateRoute({ component: Component, cprops, ...rest }) {\r\n// const role = ''\r\n// let valid;\r\n// console.log(role, 'roleee');\r\n// if (role === 'superadmin') {\r\n// valid = true;\r\n// } else if (role === 'enduser') {\r\n// valid = true;\r\n// } else if (role === 'admin') {\r\n// valid = true;\r\n// } else {\r\n// valid = false;\r\n// }\r\n// \r\n// return (\r\n// <Route\r\n// {...rest}\r\n// render={(props) => ((valid === true)\r\n// ? <Component {...cprops} {...props} />\r\n// : (\r\n// <Redirect\r\n// to={{\r\n// pathname: '/login',\r\n// state: { from: props.location },\r\n// }}\r\n// />\r\n// ))}\r\n// />\r\n// );\r\n// }\r\n\r\n// function updateFavIcon() {\r\n// const favicon = document.getElementById('favicon');\r\n// const bodyTagEle = document.getElementsByTagName('body')[0];\r\n// GlobalService.generalSelect(\r\n// (respdata) => {\r\n// const {\r\n// estatus,\r\n// emessage,\r\n// data: {\r\n// faviconLink, titleContent, roleDetailsMap, defaultRedirection,\r\n// domainTheme, isTrank,\r\n// },\r\n// } = respdata;\r\n// favicon.href = `${favicon.href}/favicon.png`;\r\n// document.title = 'E-Box App | We Revolutionize Technology and Engineering Learning';\r\n// if (estatus === true && emessage === 'success') {\r\n// if (faviconLink !== '') {\r\n// favicon.href = faviconLink;\r\n// document.title = titleContent;\r\n// }\r\n// localStorage.set('roleDetailsMap', roleDetailsMap);\r\n// localStorage.set('defaultRedirection', defaultRedirection);\r\n// localStorage.set('isTrank', isTrank);\r\n// if (domainTheme !== null && domainTheme !== undefined && domainTheme.length > 0) {\r\n// bodyTagEle.classList.add(domainTheme);\r\n// }\r\n// }\r\n// }, resturls.obtainFavIconAndTitle,\r\n// );\r\n// }\r\n\r\nexport {\r\n  parseJwt,\r\n  //  updateC1, updateUserInfo, PrivateRoute, processLogout, clearCookies, updateFavIcon,\r\n};\r\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;;AAEA,SAASA,QAAQA,CAACC,KAAK,EAAE;EACvBC,OAAO,CAACC,GAAG,CAAC,OAAO,EAAEF,KAAK,CAAC;EAC3B,MAAMG,SAAS,GAAGH,KAAK,CAACI,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;EACrC,MAAMC,MAAM,GAAGF,SAAS,CAACG,OAAO,CAAC,IAAI,EAAE,GAAG,CAAC,CAACA,OAAO,CAAC,IAAI,EAAE,GAAG,CAAC;EAC9D,MAAMC,WAAW,GAAGC,kBAAkB,CAACC,IAAI,CAACJ,MAAM,CAAC,CAACD,KAAK,CAAC,EAAE,CAAC,CAACM,GAAG,CAAEC,CAAC,IAAK,IAAK,KAAKA,CAAC,CAACC,UAAU,CAAC,CAAC,CAAC,CAACC,QAAQ,CAAC,EAAE,CAAC,EAAE,CAAEC,KAAK,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAACC,IAAI,CAAC,EAAE,CAAC,CAAC;EACzId,OAAO,CAACC,GAAG,CAAC,SAAS,EAAEK,WAAW,CAAC;EACnC,OAAOS,IAAI,CAACC,KAAK,CAACV,WAAW,CAAC;AAChC;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,SACER;AACA;AAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}